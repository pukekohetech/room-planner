<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Add these inside <head> -->
<link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#0b5fff">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<link rel="apple-touch-icon" href="/icons/icon-192.png">
<meta name="mobile-web-app-capable" content="yes">

<!-- Add this near end of <body> (or in your main JS entry) -->
<script type="module">
  import { registerServiceWorker } from "/register-sw.js";
  registerServiceWorker();
</script>
  <meta charset="UTF-8" />
  <title>Floor Plan Builder</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">

    <!-- LEFT SIDEBAR: controls & settings -->
    <div id="sidebar">
      <!-- Top control bar -->
      <div id="controls">
        <button id="toggleJoinBtn">Join: OFF</button>
        <button id="addRectBtn">Add Room</button>
        <button id="addDoorBtn">Add Door</button>
        <button id="addWindowBtn">Add Window</button>
        <label style="display:flex; gap:8px; align-items:center; margin:8px 0;">
  Name:
  <input id="studentNameInput" type="text" placeholder="e.g. Jamie Smith" style="flex:1; max-width:260px;">
</label>
        <span class="scale-label">
          Scale: 10px = 0.20m
        </span>
      </div>

      <!-- Room editor (name + size + delete) -->
      <div id="sizeEditor">
        <span class="panel-title">Edit room:</span>

        <label>
          Name
          <input id="roomNameInput" type="text" placeholder="Room name">
        </label>

        <label>
          W (m)
          <input id="widthInput" type="number" step="0.1" min="0.1">
        </label>

        <label>
          H (m)
          <input id="heightInput" type="number" step="0.1" min="0.1">
        </label>

        <div class="panel-buttons">
          <button id="applySizeBtn">Apply</button>
          <button id="cancelSizeBtn">Cancel</button>
          <button id="deleteRoomBtn" class="danger-btn">Delete room</button>
        </div>
      </div>

      <!-- Door/window editor (width + offset + top + delete) -->
      <div id="featureInfo">
        <span class="panel-title">
          Selected: <span id="featureTypeLabel"></span>
        </span>

        <label>
          Width (m)
          <input id="featureWidthInput" type="number" step="0.1" min="0.1">
        </label>

        <label>
          Offset (m)
          <input id="featureOffsetInput" type="number" step="0.1" min="0">
        </label>

        <!-- Top of window (head height); disabled for doors -->
        <label>
          Top (m)
          <input id="featureHeadInput" type="number" step="0.1" min="0.1">
        </label>

        <div class="panel-buttons">
          <button id="deleteFeatureBtn" class="danger-btn">Delete door/window</button>
        </div>
      </div>

      <!-- Walls / floors printing hint -->
      <div id="wallsHint">
        <strong>Laser layout (730mm √ó 420mm):</strong>
        <p>
          Tap/click a red wall strip or green floor to
          toggle whether it will be cut. Faded pieces are ‚Äúoff‚Äù.
        </p>
        <p class="hint">
          Labels are centred, in <span style="color:blue;">blue</span>,
          with the size directly underneath.
        </p>
      </div>
    </div>

    <!-- RIGHT SIDE: plan + walls -->
    <div id="main">
      <!-- Main plan view (scrollable) -->
      <div id="floorplanWrapper">
        <svg
          id="floorplan"
          width="1600"
          height="900"
          viewBox="0 0 1600 900">
        </svg>
      </div>

      <!-- ===== WALL ELEVATION SECTION (bottom) ===== -->
      <div id="wallsPanel">
       <div id="wallsControls">
  <span>Wall elevations:</span>
  <label>
    Wall height (m)
    <input id="wallHeightInput" type="number" step="0.1" min="1" value="2.4">
  </label>

  <!-- Material thickness for finger joints -->
  <label>
    Material (mm)
    <input id="materialThicknessInput" type="number" step="0.5" min="1" value="4">
  </label>

  <span class="hint">Laser bed: 730mm √ó 420mm</span>

  <!-- üîΩ NEW BUTTON -->
  <button id="downloadSheetsBtn" type="button">
    Download SVG sheets
  </button>
</div>




        <!-- Laser-cut wall view (fixed to laser size) -->
        <div id="wallsWrapper">
          <svg
            id="wallsSvg"
            width="730"
            height="420"
            viewBox="0 0 730 420">
          </svg>
        </div>
      </div>
    </div>
  </div>

  <!-- Behaviour -->
 <script src="common.js"></script>
<script src="walls.js"></script>
<script src="plan.js"></script>

</body>
</html>


